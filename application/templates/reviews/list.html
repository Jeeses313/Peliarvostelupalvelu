{% extends "layout.html" %}

{% block body %}

  <main role="main" class="container">			  
    <p>Arvostelut pelille {{ game.name }} </p> 
  </main>
  <table class="table">
    <thead>
      <tr>
        <th style="width: 10%">Arvostelija</th>
        <th style="width: 10%">Arvosana<a href="{{ url_for('reviews_gameGradeOrderDesc', game_id=game.id  ) }}">&#x25B2 </a><a href="{{ url_for('reviews_gameGradeOrderAsc', game_id=game.id  ) }}">&#x25BC </a></th>
        <th style="width: 20%">Arvostelu</th>
		<th style="width: 15%">Tykkäyksiä<a href="{{ url_for('reviews_gameLikeOrderDesc', game_id=game.id  ) }}">&#x25B2 </a><a href="{{ url_for('reviews_gameLikeOrderAsc', game_id=game.id  ) }}">&#x25BC </a></th>
      </tr>
    </thead>
    <tbody>
	  {% for review in reviews %}
        <tr>
          <td style="position:relative"><div style="width: 90%; overflow: auto; position: absolute;"><a href="{{ url_for('auth_profile', user_id=review.user_id  ) }}">{{ review.username }}</a></div></td>
          <td>{{ review.grade }}</td>
          <td><textarea rows="5%" cols="25%" id="aboutDescription" style="resize: none;" data-role="none" readonly="true">{{ review.text }}</textarea></td>
          <td>{{ review.like_count }} </td>
		  <td>
		 {% if current_user.is_authenticated %}
	       {% if current_user.admin %}
		     <td>
		       <form method="POST" action="{{ url_for('reviews_unmark', review_id=review.id) }}">
			     <input type="submit" name="list" value="Merkitse asialliseksi" />
			   </form>
			 </td>  
		     <td>
			   <form method="POST" action="{{ url_for('reviews_remove', review_id=review.id) }}">
			      <input type="submit" name="list" value="Poista" />
			   </form>  
	         </td>
		   {% else %}
		     {% if current_user.id == review.user_id %}
			   <td>
				  <form method="POST" action="{{ url_for('reviews_editReview', review_id=review.id) }}">
			        <input type="submit" name="edit" value="Muokkaa" />
				  </form>
			   </td>
			   <td>
			     <form method="POST" action="{{ url_for('reviews_remove', review_id=review.id) }}">
			       <input type="submit" name="list" value="Poista" />
	             </form>   
			   </td>
			 {% else %}
			   {% if review.is_liked == 0 %}
			   <td>
			     <form method="POST" action="{{ url_for('reviews_like', review_id=review.id) }}">
				   <input type="submit" name="list" value="Tykkää" /> 
				 </form>	  
			   </td>
			   {% else %}
			   <td>
			     <form method="POST" action="{{ url_for('reviews_unlike', review_id=review.id) }}">
				   <input type="submit" name="list" value="Poista tykkäys" /> 
				 </form>	  
			   </td>
			   {% endif %}
			   <td>
			     <form method="POST" action="{{ url_for('reviews_mark', review_id=review.id) }}">
				   <input type="submit" name="list" value="Merkitse asiattomaksi" /> 
				 </form>	  
			   </td>
			  {% endif %}
		    {% endif %}
	      {% endif %}
		  </td>  
        </tr>
	  {% endfor %}
    </tbody>
  </table>
{% endblock %}